(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{6132:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},16485:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},27803:(e,a,t)=>{"use strict";t.d(a,{KO:()=>i,_3:()=>r,q2:()=>l});var s=t(12115);function r(){var e;let[a,t]=(0,s.useState)({data:null,loading:!1,error:null,lastSync:null}),r=(0,s.useCallback)(async(e,a)=>{t(e=>({...e,loading:!0,error:null}));try{let t=new URLSearchParams({type:e,...a}),s=await fetch("/api/crm-integration?".concat(t)),r=await s.json();if(!r.success)throw Error(r.error||"Erro ao buscar dados do CRM");return r.data}catch(a){let e=a instanceof Error?a.message:"Erro desconhecido";throw t(a=>({...a,error:e,loading:!1})),a}},[]),l=(0,s.useCallback)(async(e,a)=>{try{let s={};e&&(s.startDate=e),a&&(s.endDate=a);let l=await r("dashboard",s);return t(e=>({...e,data:l,loading:!1,error:null,lastSync:new Date})),l}catch(e){throw t(e=>({...e,loading:!1})),e}},[r]),i=(0,s.useCallback)(async e=>await r("customers",e),[r]),n=(0,s.useCallback)(async(e,a)=>await r("sales",{startDate:e,endDate:a}),[r]),c=(0,s.useCallback)(async()=>await r("products"),[r]),d=(0,s.useCallback)(async(e,a)=>await r("analytics",{startDate:e,endDate:a}),[r]),o=(0,s.useCallback)(async e=>{t(e=>({...e,loading:!0,error:null}));try{let a=await fetch("/api/crm-integration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sync-customers",data:{customerIds:e}})}),s=await a.json();if(!s.success)throw Error(s.error||"Erro ao sincronizar clientes");return t(e=>({...e,loading:!1,lastSync:new Date})),s.results}catch(a){let e=a instanceof Error?a.message:"Erro desconhecido";throw t(a=>({...a,error:e,loading:!1})),a}},[]),x=(0,s.useCallback)(async(e,a)=>{try{let t=await fetch("/api/crm-integration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update-tags",data:{customerId:e,tags:a}})}),s=await t.json();if(!s.success)throw Error(s.error||"Erro ao atualizar tags");return s.data}catch(a){let e=a instanceof Error?a.message:"Erro desconhecido";throw t(a=>({...a,error:e})),a}},[]);(0,s.useEffect)(()=>{l();let e=setInterval(()=>{l()},3e5);return()=>clearInterval(e)},[l]);let m=(0,s.useCallback)(()=>{l()},[l]),u=(0,s.useCallback)(()=>{t(e=>({...e,error:null}))},[]);return{data:a.data,loading:a.loading,error:a.error,lastSync:a.lastSync,fetchDashboardData:l,fetchCustomers:i,fetchSales:n,fetchProducts:c,fetchAnalytics:d,syncCustomers:o,updateCustomerTags:x,refresh:m,clearError:u,isConnected:!a.error&&null!==a.data,hasData:null!==a.data,metrics:(null==(e=a.data)?void 0:e.metrics)||{totalCustomers:0,totalSales:0,totalProducts:0,averageTicket:0,conversionRate:0}}}function l(){let[e,a]=(0,s.useState)([]),[t,r]=(0,s.useState)(!1),[l,i]=(0,s.useState)(null),n=(0,s.useCallback)(async e=>{r(!0),i(null);try{let t=new URLSearchParams({type:"customers",...e}),s=await fetch("/api/crm-integration?".concat(t)),r=await s.json();if(!r.success)throw Error(r.error||"Erro ao buscar dados do CRM");a(r.data||[])}catch(e){i(e instanceof Error?e.message:"Erro ao carregar clientes")}finally{r(!1)}},[]);return(0,s.useEffect)(()=>{n()},[n]),{customers:e,loading:t,error:l,reload:n,total:e.length}}function i(e,a){let[t,r]=(0,s.useState)([]),[l,i]=(0,s.useState)(!1),[n,c]=(0,s.useState)(null),d=(0,s.useCallback)(async()=>{if(e&&a){i(!0),c(null);try{let t=new URLSearchParams({type:"sales",startDate:e,endDate:a}),s=await fetch("/api/crm-integration?".concat(t)),l=await s.json();if(!l.success)throw Error(l.error||"Erro ao buscar dados do CRM");r(l.data||[])}catch(e){c(e instanceof Error?e.message:"Erro ao carregar vendas")}finally{i(!1)}}},[e,a]);return(0,s.useEffect)(()=>{d()},[d]),{sales:t,loading:l,error:n,reload:d,total:t.reduce((e,a)=>e+(a.valor||0),0)}}},61362:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},63581:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},93260:(e,a,t)=>{Promise.resolve().then(t.bind(t,95591))},95591:(e,a,t)=>{"use strict";t.d(a,{default:()=>R});var s=t(95155),r=t(12115),l=t(34486),i=t(71408),n=t(89559),c=t(6132),d=t(10512),o=t(61362),x=t(91761),m=t(30814),u=t(71847);let h=(0,u.A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),g=(0,u.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var p=t(1524),y=t(26921),j=t(80534);let b=(0,u.A)("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);var f=t(16485),N=t(86651),v=t(63581),w=t(39867),C=t(57828),k=t(26991),P=t(73850),S=t(68425),M=t(47734),A=t(73697),T=t(23508),E=t(77568),D=t(78765),F=t(12235),O=t(69386),V=t(27803);function R(){let[e,a]=(0,r.useState)({dataInicio:new Date(Date.now()-2592e6).toISOString().split("T")[0],dataFim:new Date().toISOString().split("T")[0],status:"",origem:"",formaPagamento:"",utmSource:"",busca:""}),[t,u]=(0,r.useState)(null),[R,I]=(0,r.useState)(!1),[L,B]=(0,r.useState)(1),[z,q]=(0,r.useState)("tabela"),{data:_,loading:U,error:K,refresh:Y,isConnected:W}=(0,V._3)(),{sales:G,loading:J,reload:Q}=(0,V.KO)(e.dataInicio,e.dataFim),[X,H]=(0,r.useState)([]),[Z,$]=(0,r.useState)({totalVendas:0,receitaTotal:0,ticketMedio:0,totalProdutos:0,taxaConversao:0,crescimentoMensal:0}),[ee,ea]=(0,r.useState)({vendasPorDia:[],vendasPorOrigem:[],vendasPorFormaPagamento:[],produtosMaisVendidos:[],funil:[]});(0,r.useEffect)(()=>{if(G&&G.length>0){let a=G.filter(a=>{var t;if(e.status&&a.status!==e.status||e.origem&&a.origem!==e.origem||e.formaPagamento&&a.formaPagamento!==e.formaPagamento||e.utmSource&&(null==(t=a.utms)?void 0:t.utmSource)!==e.utmSource)return!1;if(e.busca){let t=e.busca.toLowerCase();if(!a.cliente.nome.toLowerCase().includes(t)&&!a.cliente.email.toLowerCase().includes(t)&&!a.idTransacao.toLowerCase().includes(t))return!1}return!0});H(a);let t=a.length,s=a.reduce((e,a)=>e+a.valorTotal,0),r=a.reduce((e,a)=>e+a.produtos.reduce((e,a)=>e+a.quantidade,0),0),l=new Date().getMonth(),i=new Date().getFullYear(),n=a.filter(e=>{let a=new Date(e.data);return a.getMonth()===l&&a.getFullYear()===i}),c=a.filter(e=>{let a=new Date(e.data);return a.getMonth()===(0===l?11:l-1)&&a.getFullYear()===(0===l?i-1:i)}),d=n.reduce((e,a)=>e+a.valorTotal,0),o=c.reduce((e,a)=>e+a.valorTotal,0);$({totalVendas:t,receitaTotal:s,ticketMedio:t>0?s/t:0,totalProdutos:r,taxaConversao:85.2,crescimentoMensal:o>0?(d-o)/o*100:0}),et(a)}},[G,e]);let et=e=>{let a=e.reduce((e,a)=>{let t=new Date(a.data).toISOString().split("T")[0];return e[t]||(e[t]={data:t,vendas:0,receita:0}),e[t].vendas+=1,e[t].receita+=a.valorTotal,e},{}),t=e.reduce((e,a)=>{let t=a.origem||"N\xe3o informado";return e[t]||(e[t]={name:t,value:0,receita:0}),e[t].value+=1,e[t].receita+=a.valorTotal,e},{}),s=e.reduce((e,a)=>{let t=a.formaPagamento||"N\xe3o informado";return e[t]||(e[t]={name:t,value:0,receita:0}),e[t].value+=1,e[t].receita+=a.valorTotal,e},{}),r=e.reduce((e,a)=>(a.produtos.forEach(a=>{e[a.nome]||(e[a.nome]={name:a.nome,quantidade:0,receita:0}),e[a.nome].quantidade+=a.quantidade,e[a.nome].receita+=a.subtotal}),e),{});ea({vendasPorDia:Object.values(a).sort((e,a)=>e.data.localeCompare(a.data)),vendasPorOrigem:Object.values(t),vendasPorFormaPagamento:Object.values(s),produtosMaisVendidos:Object.values(r).sort((e,a)=>a.quantidade-e.quantidade).slice(0,10),funil:[{etapa:"Visitantes",valor:1e4,taxa:100},{etapa:"Leads",valor:2500,taxa:25},{etapa:"Prospects",valor:750,taxa:7.5},{etapa:"Vendas",valor:e.length,taxa:e.length/1e4*100}]})},es=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316"],er=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),el=e=>new Date(e).toLocaleDateString("pt-BR"),ei=Math.ceil(X.length/20),en=X.slice((L-1)*20,20*L);return U||J?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(n.A,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-500"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Carregando dados de vendas..."})]})}):K?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.A,{className:"w-8 h-8 mx-auto mb-4 text-red-500"}),(0,s.jsxs)("p",{className:"text-red-600 mb-4",children:["Erro ao carregar dados: ",K]}),(0,s.jsx)("button",{onClick:Y,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Tentar Novamente"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,s.jsx)(d.A,{className:"w-8 h-8 mr-3 text-blue-500"}),"Dashboard de Vendas"]}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"An\xe1lise completa de vendas e performance comercial"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg ".concat(W?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[W?(0,s.jsx)(o.A,{className:"w-4 h-4"}):(0,s.jsx)(c.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:W?"CRM Conectado":"CRM Desconectado"})]}),(0,s.jsxs)("button",{onClick:Y,className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[(0,s.jsx)(n.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Atualizar"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 mb-6",children:[(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total de Vendas"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Z.totalVendas.toLocaleString()})]}),(0,s.jsx)(d.A,{className:"w-8 h-8 text-blue-500"})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Receita Total"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:er(Z.receitaTotal)})]}),(0,s.jsx)(x.A,{className:"w-8 h-8 text-green-500"})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Ticket M\xe9dio"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:er(Z.ticketMedio)})]}),(0,s.jsx)(m.A,{className:"w-8 h-8 text-purple-500"})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Produtos Vendidos"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:Z.totalProdutos.toLocaleString()})]}),(0,s.jsx)(h,{className:"w-8 h-8 text-orange-500"})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Taxa de Convers\xe3o"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:[Z.taxaConversao.toFixed(1),"%"]})]}),(0,s.jsx)(g,{className:"w-8 h-8 text-emerald-500"})]})}),(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Crescimento Mensal"}),(0,s.jsxs)("div",{className:"flex items-center",children:[Z.crescimentoMensal>=0?(0,s.jsx)(p.A,{className:"w-4 h-4 text-green-500 mr-1"}):(0,s.jsx)(y.A,{className:"w-4 h-4 text-red-500 mr-1"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat(Z.crescimentoMensal>=0?"text-green-600":"text-red-600"),children:[Z.crescimentoMensal>=0?"+":"",Z.crescimentoMensal.toFixed(1),"%"]})]})]}),(0,s.jsx)(j.A,{className:"w-8 h-8 text-blue-500"})]})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,s.jsxs)(l.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Vendas por Dia"}),(0,s.jsx)(j.A,{className:"w-5 h-5 text-gray-400"})]}),(0,s.jsx)(k.u,{width:"100%",height:300,children:(0,s.jsxs)(P.Q,{data:ee.vendasPorDia,children:[(0,s.jsx)(S.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,s.jsx)(M.W,{dataKey:"data",stroke:"#666",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),(0,s.jsx)(A.h,{stroke:"#666",fontSize:12}),(0,s.jsx)(T.m,{formatter:(e,a)=>["vendas"===a?"".concat(e," vendas"):er(Number(e)),"vendas"===a?"Vendas":"Receita"],labelFormatter:e=>"Data: ".concat(el(e))}),(0,s.jsx)(E.G,{type:"monotone",dataKey:"receita",stroke:"#3B82F6",fill:"url(#gradientReceita)",strokeWidth:2}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"gradientReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]})})]})})]}),(0,s.jsxs)(l.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Vendas por Origem"}),(0,s.jsx)(b,{className:"w-5 h-5 text-gray-400"})]}),(0,s.jsx)(k.u,{width:"100%",height:300,children:(0,s.jsxs)(D.r,{children:[(0,s.jsx)(F.F,{data:ee.vendasPorOrigem,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"value",children:ee.vendasPorOrigem.map((e,a)=>(0,s.jsx)(O.f,{fill:es[a%es.length]},"cell-".concat(a)))}),(0,s.jsx)(T.m,{formatter:(e,a,t)=>["".concat(e," vendas (").concat(er(t.payload.receita),")"),"Vendas"]})]})}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center gap-2 mt-4",children:ee.vendasPorOrigem.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:es[a%es.length]}}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e.name})]},e.name))})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(f.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("input",{type:"date",value:e.dataInicio,onChange:e=>a(a=>({...a,dataInicio:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-gray-500",children:"at\xe9"}),(0,s.jsx)("input",{type:"date",value:e.dataFim,onChange:e=>a(a=>({...a,dataFim:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(N.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar por cliente, email ou ID...",value:e.busca,onChange:e=>a(a=>({...a,busca:e.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("select",{value:e.status,onChange:e=>a(a=>({...a,status:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Todos os Status"}),(0,s.jsx)("option",{value:"Pagamento Aprovado",children:"Pagamento Aprovado"}),(0,s.jsx)("option",{value:"Compra Conclu\xedda",children:"Compra Conclu\xedda"}),(0,s.jsx)("option",{value:"Compra Aprovada",children:"Compra Aprovada"})]}),(0,s.jsxs)("button",{onClick:()=>I(!R),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,s.jsx)(v.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Filtros"})]}),(0,s.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[(0,s.jsx)(w.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Exportar"})]})]})]}),(0,s.jsx)(i.N,{children:R&&(0,s.jsx)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origem"}),(0,s.jsxs)("select",{value:e.origem,onChange:e=>a(a=>({...a,origem:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Todas as Origens"}),(0,s.jsx)("option",{value:"Yampi",children:"Yampi"}),(0,s.jsx)("option",{value:"WooCommerce",children:"WooCommerce"}),(0,s.jsx)("option",{value:"Manual",children:"Manual"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de Pagamento"}),(0,s.jsxs)("select",{value:e.formaPagamento,onChange:e=>a(a=>({...a,formaPagamento:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Todas as Formas"}),(0,s.jsx)("option",{value:"Cart\xe3o de Cr\xe9dito",children:"Cart\xe3o de Cr\xe9dito"}),(0,s.jsx)("option",{value:"PIX",children:"PIX"}),(0,s.jsx)("option",{value:"Boleto",children:"Boleto"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UTM Source"}),(0,s.jsx)("input",{type:"text",placeholder:"Ex: facebook, google...",value:e.utmSource,onChange:e=>a(a=>({...a,utmSource:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{onClick:()=>a({dataInicio:new Date(Date.now()-2592e6).toISOString().split("T")[0],dataFim:new Date().toISOString().split("T")[0],status:"",origem:"",formaPagamento:"",utmSource:"",busca:""}),className:"w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Limpar Filtros"})})]})})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Vendas Recentes"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>q("tabela"),className:"px-3 py-1 rounded-lg text-sm ".concat("tabela"===z?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:"Tabela"}),(0,s.jsx)("button",{onClick:()=>q("cards"),className:"px-3 py-1 rounded-lg text-sm ".concat("cards"===z?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:"Cards"})]})]})}),"tabela"===z?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Venda"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produtos"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:en.map((e,a)=>(0,s.jsxs)(l.P.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.idTransacao]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.origem||"Manual"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.cliente.nome}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.cliente.email})]})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:[e.produtos.length," produto",e.produtos.length>1?"s":""]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.produtos.slice(0,2).map(e=>e.nome).join(", "),e.produtos.length>2&&"..."]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:er(e.valorTotal)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Compra Conclu\xedda"===e.status?"bg-green-100 text-green-800":"Pagamento Aprovado"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:el(e.data)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsx)("button",{onClick:()=>u(e),className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"Ver detalhes",children:(0,s.jsx)(C.A,{className:"w-4 h-4"})})})]},e._id))})]})}):(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:en.map((e,a)=>(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"bg-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>u(e),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",e.idTransacao]}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("Compra Conclu\xedda"===e.status?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.status})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.cliente.nome}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.cliente.email})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900",children:er(e.valorTotal)}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.produtos.length," produto",e.produtos.length>1?"s":""]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:el(e.data)}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:e.origem||"Manual"})]})]})]},e._id))})}),ei>1&&(0,s.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,s.jsx)("button",{onClick:()=>B(Math.max(1,L-1)),disabled:1===L,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),(0,s.jsx)("button",{onClick:()=>B(Math.min(ei,L+1)),disabled:L===ei,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Pr\xf3ximo"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Mostrando"," ",(0,s.jsx)("span",{className:"font-medium",children:(L-1)*20+1})," ","at\xe9"," ",(0,s.jsx)("span",{className:"font-medium",children:Math.min(20*L,X.length)})," ","de"," ",(0,s.jsx)("span",{className:"font-medium",children:X.length})," ","resultados"]})}),(0,s.jsx)("div",{children:(0,s.jsx)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:Array.from({length:Math.min(ei,5)},(e,a)=>{let t;return t=ei<=5||L<=3?a+1:L>=ei-2?ei-4+a:L-2+a,(0,s.jsx)("button",{onClick:()=>B(t),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(t===L?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:t},t)})})})]})]})})]}),(0,s.jsx)(i.N,{children:t&&(0,s.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>u(null),children:(0,s.jsx)(l.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Detalhes da Venda #",t.idTransacao]}),(0,s.jsx)("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es da Venda"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"ID da Transa\xe7\xe3o:"}),(0,s.jsx)("span",{className:"font-medium",children:t.idTransacao})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Data:"}),(0,s.jsx)("span",{className:"font-medium",children:new Date(t.data).toLocaleString("pt-BR")})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("Compra Conclu\xedda"===t.status?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:t.status})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Valor Total:"}),(0,s.jsx)("span",{className:"font-bold text-lg",children:er(t.valorTotal)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Origem:"}),(0,s.jsx)("span",{className:"font-medium",children:t.origem||"Manual"})]}),t.formaPagamento&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Forma de Pagamento:"}),(0,s.jsx)("span",{className:"font-medium",children:t.formaPagamento})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es do Cliente"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Nome:"}),(0,s.jsx)("span",{className:"font-medium",children:t.cliente.nome})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,s.jsx)("span",{className:"font-medium",children:t.cliente.email})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Telefone:"}),(0,s.jsx)("span",{className:"font-medium",children:t.cliente.telefone||"N\xe3o informado"})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Produtos"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Produto"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantidade"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Valor Unit\xe1rio"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Subtotal"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.produtos.map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.nome}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.quantidade}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:er(e.valorUnitario)}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:er(e.subtotal)}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("Enviado"===e.statusEnvio?"bg-green-100 text-green-800":"N\xe3o Enviado"===e.statusEnvio?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.statusEnvio||"Pendente"})})]},a))})]})})]}),t.utms&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es de Marketing"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"UTM Source:"}),(0,s.jsx)("p",{className:"font-medium",children:t.utms.utmSource||"N\xe3o informado"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"UTM Medium:"}),(0,s.jsx)("p",{className:"font-medium",children:t.utms.utmMedium||"N\xe3o informado"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"UTM Campaign:"}),(0,s.jsx)("p",{className:"font-medium",children:t.utms.utmCampaign||"N\xe3o informado"})]})]})]})]})})})})]})}}},e=>{e.O(0,[911,195,441,255,358],()=>e(e.s=93260)),_N_E=e.O()}]);