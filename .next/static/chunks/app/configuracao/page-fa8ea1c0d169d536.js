(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[510],{6132:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},15870:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},16151:(e,s,a)=>{"use strict";a.d(s,{CRMProvider:()=>i,m:()=>o});var t=a(95155),r=a(12115);let l={baseUrl:"https://crm.conectaprime.com",apiToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6InN0YXRpYy1hZG1pbi1pZCIsImVtYWlsIjoiYWRtaW5Ac2VndWlkb3Jlc3ByaW1lLmNvbSIsInJvbGUiOiJhZG1pbiIsInBlcm1pc3NvZXMiOlsiSGlzdMOzcmljbyBkZSBFbnZpb3MiLCJSZWFsaXphciBFbnZpb3MiXSwiaWF0IjoxNzUxNDkwNDk3fQ.FNSAlVtFjpZVTYvkjEVXRRghvTscU0sqdP6H9mk_KgI",autoSync:!0,syncInterval:5},n={connected:!1,lastTest:null,error:null,responseTime:null},c=(0,r.createContext)(void 0);function i(e){let{children:s}=e,[a,i]=(0,r.useState)(l),[o,d]=(0,r.useState)(n),[x,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("crm-config"),s=localStorage.getItem("crm-status");if(e)try{i(JSON.parse(e))}catch(e){}if(s)try{let e=JSON.parse(s);e.lastTest&&(e.lastTest=new Date(e.lastTest)),d(e)}catch(e){}},[]),(0,r.useEffect)(()=>{localStorage.setItem("crm-status",JSON.stringify(o))},[o]),(0,r.useEffect)(()=>{if(a.apiToken&&""!==a.apiToken&&!o.connected){let e=setTimeout(()=>{h()},1e3);return()=>clearTimeout(e)}},[a.apiToken]);let h=async()=>{m(!0);let e=Date.now();try{let s=await fetch("/api/crm-integration?type=test",{method:"GET",headers:{"X-CRM-URL":a.baseUrl,"X-CRM-TOKEN":a.apiToken}}),t=Date.now()-e,r=await s.json();r.success?d({connected:!0,lastTest:new Date,error:null,responseTime:t}):d({connected:!1,lastTest:new Date,error:r.error||"Erro na conex\xe3o",responseTime:t})}catch(s){d({connected:!1,lastTest:new Date,error:s instanceof Error?s.message:"Erro de rede",responseTime:Date.now()-e})}finally{m(!1)}},u=async()=>{m(!0);try{localStorage.setItem("crm-config",JSON.stringify(a)),await h()}catch(e){}finally{m(!1)}};return(0,r.useEffect)(()=>{if(a.autoSync&&o.connected){let e=setInterval(()=>{h()},60*a.syncInterval*1e3);return()=>clearInterval(e)}},[a.autoSync,a.syncInterval,o.connected]),(0,t.jsx)(c.Provider,{value:{config:a,setConfig:i,status:o,setStatus:d,isLoading:x,setIsLoading:m,testConnection:h,saveConfig:u},children:s})}function o(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useCRM deve ser usado dentro de um CRMProvider");return e}},42529:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},50483:(e,s,a)=>{"use strict";a.d(s,{default:()=>j});var t=a(95155),r=a(12115),l=a(34486),n=a(71847);let c=(0,n.A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var i=a(42529),o=a(6132);let d=(0,n.A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var x=a(89559),m=a(15870),h=a(93499);let u=(0,n.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var p=a(57828);let y=(0,n.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),b=(0,n.A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),g=(0,n.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var f=a(16151);function j(){let{config:e,setConfig:s,status:a,isLoading:n,testConnection:j,saveConfig:v}=(0,f.m)(),[N,k]=(0,r.useState)(!1),w=async()=>{try{await navigator.clipboard.writeText(e.apiToken)}catch(e){}};return(0,t.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)("div",{className:"p-3 bg-blue-500 rounded-xl",children:(0,t.jsx)(c,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Integra\xe7\xe3o CRM"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Configure a conex\xe3o com seu CRM atual para an\xe1lise de dados"})]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl border-2 ".concat(a.connected?"bg-green-50 border-green-200":a.error?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[a.connected?(0,t.jsx)(i.A,{className:"w-5 h-5 text-green-500"}):a.error?(0,t.jsx)(o.A,{className:"w-5 h-5 text-red-500"}):(0,t.jsx)(d,{className:"w-5 h-5 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold ".concat(a.connected?"text-green-700":a.error?"text-red-700":"text-gray-700"),children:a.connected?"Conectado":a.error?"Erro na Conex\xe3o":"N\xe3o Conectado"}),a.lastTest&&(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["\xdaltimo teste: ",a.lastTest.toLocaleString("pt-BR"),a.responseTime&&" (".concat(a.responseTime,"ms)")]})]})]}),(0,t.jsxs)("button",{onClick:j,disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors",children:[(0,t.jsx)(x.A,{className:"w-4 h-4 ".concat(n?"animate-spin":"")}),(0,t.jsx)("span",{children:n?"Testando...":"Testar Conex\xe3o"})]})]}),a.error&&(0,t.jsx)("div",{className:"mt-3 p-3 bg-red-100 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-700 text-sm",children:a.error})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(m.A,{className:"w-5 h-5 text-gray-600"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Configura\xe7\xe3o B\xe1sica"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL do CRM Atual"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"url",value:e.baseUrl,onChange:a=>s({...e,baseUrl:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://crm.conectaprime.com"}),(0,t.jsx)(h.A,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"URL base do seu CRM atual (ex: crm.conectaprime.com)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Token de API"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:N?"text":"password",value:e.apiToken,onChange:a=>s({...e,apiToken:a.target.value}),className:"w-full px-4 py-3 pr-20 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Seu token de API do CRM"}),(0,t.jsxs)("div",{className:"absolute right-2 top-2 flex space-x-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>k(!N),className:"p-1 text-gray-400 hover:text-gray-600",children:N?(0,t.jsx)(u,{className:"w-4 h-4"}):(0,t.jsx)(p.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{type:"button",onClick:w,className:"p-1 text-gray-400 hover:text-gray-600",children:(0,t.jsx)(y,{className:"w-4 h-4"})})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Token de autentica\xe7\xe3o para acessar a API do CRM"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(b,{className:"w-5 h-5 text-gray-600"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Sincroniza\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sincroniza\xe7\xe3o Autom\xe1tica"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Atualizar dados automaticamente"})]}),(0,t.jsx)("button",{onClick:()=>s({...e,autoSync:!e.autoSync}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(e.autoSync?"bg-blue-500":"bg-gray-300"),children:(0,t.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(e.autoSync?"translate-x-6":"translate-x-1")})})]}),e.autoSync&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intervalo de Sincroniza\xe7\xe3o (minutos)"}),(0,t.jsxs)("select",{value:e.syncInterval,onChange:a=>s({...e,syncInterval:Number(a.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:1,children:"1 minuto"}),(0,t.jsx)("option",{value:5,children:"5 minutos"}),(0,t.jsx)("option",{value:10,children:"10 minutos"}),(0,t.jsx)("option",{value:15,children:"15 minutos"}),(0,t.jsx)("option",{value:30,children:"30 minutos"}),(0,t.jsx)("option",{value:60,children:"1 hora"})]})]}),(0,t.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(g,{className:"w-5 h-5 text-blue-500 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-blue-900",children:"Seguran\xe7a"}),(0,t.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Todas as conex\xf5es s\xe3o criptografadas e os tokens s\xe3o armazenados de forma segura."})]})]})})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,t.jsx)("button",{onClick:j,disabled:n,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-colors",children:n?"Testando...":"Testar Conex\xe3o"}),(0,t.jsx)("button",{onClick:v,disabled:n||!e.baseUrl||!e.apiToken,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors",children:n?"Salvando...":"Salvar Configura\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"mt-8 bg-gray-50 rounded-xl p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Como Configurar"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),(0,t.jsxs)("p",{children:["Acesse seu CRM atual em ",(0,t.jsx)("strong",{children:"crm.conectaprime.com"})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),(0,t.jsxs)("p",{children:["V\xe1 em ",(0,t.jsx)("strong",{children:"Configura\xe7\xf5es → API → Gerar Token"})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),(0,t.jsx)("p",{children:"Cole o token gerado no campo acima"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"4"}),(0,t.jsx)("p",{children:"Teste a conex\xe3o e salve a configura\xe7\xe3o"})]})]})]})]})}},68590:(e,s,a)=>{Promise.resolve().then(a.bind(a,50483))},93499:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}},e=>{e.O(0,[911,441,255,358],()=>e(e.s=68590)),_N_E=e.O()}]);